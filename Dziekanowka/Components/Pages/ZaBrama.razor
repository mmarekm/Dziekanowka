@using Dziekanowka.Mechanizm
<div class="zaBramaWidok widok rel">
    <div class="abs powrotDoDomuGuzik"><button @onclick="async () => await NaZmianeEkranu.InvokeAsync(EkranGry.Gospodarstwo)" class="wyroznionyGuzik"><img src='img/teren/doDomuZZaBramyKlik.png' /></button></div>
    <div class="abs doSklepikuGuzik"><button @onclick="async () => await NaZmianeEkranu.InvokeAsync(EkranGry.Sklepik)" class="wyroznionyGuzik"><img src='img/budynki/sklepik.png' /></button></div>
    <div class="abs zaBramaDoMiastoGuzik"><button @onclick="DoMiasta" class="wyroznionyGuzik"><img src='img/teren/zaBramaDoMiasto.png' /></button></div>
    <div class="abs doSasiadaGuzik"><button @onclick="DoSasiada" class="wyroznionyGuzik"><img src="img/teren/zaBramaDoSasiada.png" /></button></div>
    <div class="abs zaBramaDoLas"><button @onclick="async () => await NaZmianeEkranu.InvokeAsync(EkranGry.LasIntro)" class="wyroznionyGuzik"><img src='img/teren/zaBramaDoLas.png' /></button></div>
    <div class="abs stanPaliwaZaBrama">
        <div class="kanisterGarazGospodarczy"><img class="obrazekWypelnia" src="img/przedmioty/kanister.png" /></div>
        <progress class="pasekPaliwa" value="@Gracz.Paliwo.IloscPaliwa" max="@Gracz.Paliwo.MaksymalnaIloscPaliwa" style="--procent: @((int)((double)Gracz.Paliwo.IloscPaliwa / Gracz.Paliwo.MaksymalnaIloscPaliwa * 100) / 10) "></progress>
    </div>
</div>

@code {
    [Parameter] public Gracz Gracz { get; set; } = null!;
    [Parameter] public EventCallback<EkranGry> NaZmianeEkranu { get; set; }
    public async Task DoSasiada()
    {
        await NaZmianeEkranu.InvokeAsync(EkranGry.PsySasiadaSzczekaja);
        await Task.Delay(5000);
        await NaZmianeEkranu.InvokeAsync(EkranGry.ZaBrama);
    }
    public async Task DoMiasta()
    {
        if (Gracz.Paliwo.IloscPaliwa < 1) return;
        Gracz.Paliwo.IloscPaliwa--;
        await NaZmianeEkranu.InvokeAsync(EkranGry.SamochodDoMiasta);
        await Task.Delay(5000);
        await NaZmianeEkranu.InvokeAsync(EkranGry.Miasto1);
    }
}